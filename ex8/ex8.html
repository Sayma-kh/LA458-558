<!DOCTYPE html>
<html>
    <head>      
<title> Exercise 8: Create GeoJSON and add to Leaflet </title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" /> <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
       <script src="https://sayma-kh.github.io/LA458-558/ex8/map.geojson"></script> 
         <script src="https://indicator.extension.iastate.edu/classes/leaflet-ajax-gh-pages/dist/leaflet.ajax.min.js"></script>
  <style>
        
        body{background-color:beige}
        h1{color: black; font-family: inherit; text-align: center; font-size: 35px}
        h2{color: black; font-family: inherit; text-align: center; font-size: 20px}
        p{color: black; font-family: verdana; font-size: 15px; text-align:center}
        div{vertical-align: middle;
      margin: auto} 
        #map {
            width: 1200px;
            height:500px;
            vertical-align: center;
        }
      
   
    </style>
</head>
  <body>
   <h1>"Exercise 8: Create GeoJSON and add to Leaflet"</h1>
<h2>Sayma Khajehei<br> March 14th, 2019</h2> 
   <div id='map'></div>
      <script>
   var map = L.map('map').setView([41, -100], 4);
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
	attribution: 'The map contributors',
	maxZoom: 18
}).addTo(map); 
      </script>
      <script>    
         var myURL = "https://sayma-kh.github.io/LA458-558/ex8/map.geojson";
  
        function style(feature) {
    return {
        stroke: false,
        fillColor: ((feature.properties.NumStudent == 1) ? '#d73027' : 
            (feature.properties.rank == 2) ? '#2c7fb8' :
            (feature.properties.rank == 3) ? '#a1dab4': '#41b6c4' ),
        weight: 0
    };
}
          
var geojsonLayer = new L.GeoJSON.AJAX(myURL , {
    pointToLayer: function (feature, latlng) {
        return new L.CircleMarker(latlng, {
            stroke: true,
            weight: 0, //stroke weight
            //color: '#000000', //stroke color
            opacity: 1.0, //stoke opacity
            fillOpacity: 0.7,
            radius: feature.properties.NumStudent + 5,
        });
    },

    onEachFeature: function (feature, layer) {
        htmlText = "<strong>" + feature.properties.Name + "</strong>" + "<div class='centered'>" + "<img src='" + feature.properties.URLlogo + "' width='100'>" + "</div>";
        layer.bindPopup(htmlText);
        textForTooltip = feature.properties.Name + " Ranked " + feature.properties.Rank + " Among Planning Schools with " + feature.properties.AcceptanceRate + " Acceptance Rate " ;
		layer.bindTooltip(textForTooltip);
    }
}).addTo(map);
      </script>  
      
     <script>
         
 var breaks = [1, 2, 3,]; 
var labels = ['High', 'Moderate', 'Low'];
function getColor(d) {
    return  d == '1' ? "#d73027" :
    d == '2' ? "#2c7fb8" :
    d == '3' ? "#a1dab4":
    "#FFFFFF";
}


var legend = L.control({position: 'bottomleft'});
legend.onAdd = function (map) {
    var div = L.NumStudent.create('div', 'info legend');
    // loop through items and generate legend items each
    for (var i = 0; i < breaks.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(breaks[i]) + ' "></i> ' +
            labels[i] + (breaks ? '' +  '<br>' : '');
    }
    return div;
};
legend.addTo(map);
      </script>
      </body>
</html>